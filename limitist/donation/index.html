<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!-- 위 3개의 메타 태그는 *반드시* head 태그의 처음에 와야합니다; 어떤 다른 콘텐츠들은 반드시 이 태그들 *다음에* 와야 합니다 -->
    <title>토스 기부하기</title>

    <!-- Google Tag Manager -->
    <script>
        (function (w, d, s, l, i) {
            w[l] = w[l] || [];
            w[l].push({
                'gtm.start': new Date().getTime(),
                event: 'gtm.js'
            });
            var f = d.getElementsByTagName(s)[0],
                j = d.createElement(s),
                dl = l != 'dataLayer' ? '&l=' + l : '';
            j.async = true;
            j.src =
                'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
            f.parentNode.insertBefore(j, f);
        })(window, document, 'script', 'dataLayer', 'GTM-KPTXVGX');
    </script>
    <!-- End Google Tag Manager -->
    <!-- Toss 공용 CSS 문서의 맨 처음에 와야 합니다;-->
    <link href="https://toss.im/frame/assets/stylesheets/tossframe-latest.css" rel="stylesheet">
    <link href="assets/css/donation.css" rel="stylesheet">
</head>

<body id="donation" class="elephant200">
    <!-- Google Tag Manager (noscript) -->
    <noscript>
        <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KPTXVGX" height="0" width="0" style="display:none;visibility:hidden"></iframe>
    </noscript>
    <!-- End Google Tag Manager (noscript) -->
    <div class="header blue600">
        <p class="text-center">
            Toss와 함께 작은 기부를 시작해보세요.
            <br> 기부금 영수증도 발급 가능합니다.
        </p>
    </div>
    <section class="contents">
        <div class="content">
            <div class="content-header">
                <img src="assets/images/logo_savethechildren.png" alt="세이브더칠드런" class="pull-left">
                <div class="partner">
                    <h3 class="partner-name elephant700-text">세이브더칠드런</h3>
                    <span class="donation-status elephant600-text">후원 모집 중</span>
                </div>
            </div>
            <p class="description">
                “괜찮아요...별로 안 추워요.”
                <br>
                <br> 한 겨울에 입기엔 너무 얇은 점퍼, 간신히 손목을 가리는 짧은 소매. 그리고 그 헤어진 소매 끝이 터질까 단단히 붙여놓은 테이프. 감당이 안 되는 난방비 부담에 보일러를 틀 수조차 없습니다.
                <br>
                <br>
                <br>연락이 끊긴 부모님을 대신해주는 유일한 가족, 할머니... 그런 할머니가 폐암수술을 받고 아프신 게 매일 같은 옷을 입는다는 친구들의 놀림보다 속상하고, 추위보다 더 무섭습니다.
                <br>
                <br> 효정이가 할 수 있는 유일한 겨울 준비, 테이프를 붙이는 일.
                <br> 조금이라도 한기를 막아보려 할머니를 도와 구석구석 테이프를 붙여 보지만, 한 겨울 추위를 막기에는 역부족입니다.
                <br>
                <br>
                <strong>효정이와 같은 국민기초생활보장수급 가구는 전국적으로 약 100만 가구가 있습니다.
                여러분의 손길로 이들에게 따뜻한 겨울 의복과 난방비를 지원해주세요.</strong>
                <br>
                <br> 사진 ⓒSave the Children
            </p>
            <img src="assets/images/img_savethechildren_campaign_1.jpg" class="img_campaign">
            <div class="footer">
                <button type="button"  class="btn btn-lg btn-block btn-accent-bordered donate-btn-group" data-toggle="modal" data-target="#modal-payment" data-id="1">Toss로 후원하기</button>
            </div>
        </div>
        <div class="content">
            <div class="content-header">
                <img src="assets/images/logo_savethechildren.png" alt="세이브더칠드런" class="pull-left">
                <div class="partner">
                    <h3 class="partner-name elephant700-text">세이브더칠드런</h3>
                    <span class="donation-status elephant600-text">후원 모집 중</span>
                </div>
            </div>
            <p class="description">
                "난민 아이들을 바다에서 구조해 주세요."
                <br>
                <br>지중해에서는 오늘도 목숨을 건 탈출이 이어집니다. 살기 위해 목숨을 걸고 작은 보트에 의지해 망망대해를 건너는 사람들. 2016년 한해 36만 명이 바다를 건너 유럽으로 탈출했고, 이중 4,800여명이 바다 위에서 목숨을 잃었습니다.
                <br>
                <br>
                <br>지중해를 건너는 난민 아동 가운데 90%는 부모의 보살핌 없이 홀로 여정을 감행하고 있습니다. 차디찬 바다에서 아동들이 더 이상 희생당하는 일이 없도록 도움의 손길을 보내주세요.
                <br>
                <br><strong>어떻게 도울 수 있나요?</strong>
                <br>
                <br>난민아동 수색 구조선을 지원해주세요.
                <br> 난민 구조선은 전문 인력들이 구조를 필요로 하는 난민을 수색하고 구조하며, 구조된 아동을 긴급치료하고 보호하는 활동을 합니다.
                <br>
                <br>여러분의 소중한 후원금은 구조선 내 긴급구호 물품을 구비하고 의료진을 배치하는 등 가장 필요한 현장에 지원됩니다.
                <br>
                <br>험난한 바닷길에 내던져진 아이들에게는 지금 여러분의 도움이 절실히 필요합니다.
                <br>
                <br>사진 ⓒJonathan Hyams/Save the Children
            </p>
            <img src="assets/images/img_savethechildren_campaign_4.jpg" class="img_campaign">
            <div class="footer">
                <button type="button"  class="btn btn-lg btn-block btn-accent-bordered donate-btn-group" data-toggle="modal" data-target="#modal-payment" data-id="2">Toss로 후원하기</button>
            </div>
        </div>
        <div class="content">
            <div class="content-header">
                <img src="assets/images/logo_savethechildren.png" alt="세이브더칠드런" class="pull-left">
                <div class="partner">
                    <h3 class="partner-name elephant700-text">세이브더칠드런</h3>
                    <span class="donation-status elephant600-text">후원 모집 중</span>
                </div>
            </div>
            <p class="description">
                "아프리카에 빨간 염소를 보내주세요!"
                <br>
                <br> 가뭄과 기근, 널뛰는 식량 가격, 기후 변화로 인해 아프리카 어린이들과 가정이 어려움을 겪고 있습니다.
                <br>
                <br>
                <br>이들에게 주요 생계 수단인 염소를 보내주어 영양부족으로 인한 위기를 극복하고 가정 생계를 회복할 수 있도록 지원하는 프로그램입니다.
                <br>
                <br><strong>왜 염소일까요?</strong>
                <br>
                <br> 염소는 건조한 날씨에도 소량의 먹이만 먹고 살아남을 수 있어 소에 비해 사육이 용이합니다. 염소는 18개월 이후부터 번식이 가능하고 1년에 3~4마리의 새끼를 낳아 가정경제에 보탬을 줄 뿐만 아니라 매일 신선한 염소 젖을 아동들에게 제공하여 풍부한 미세영양소와 단백질을 보충해 줍니다. 염소는 정착민과 유목민 모두 일상적인 생계수단으로 활용하고 있으며, 평균 수명은 10년이 넘습니다.
                <br>
                <br> 후원자님의 기부금은 매일 마실 신선한 우유와 곡식을 구매할 돈(새끼 염소를 팔아 곡식 구매), 새끼를 키워 번식시키는 가정 소득원으로 확대 됩니다. 한 마리의 염소 구입비용 4만원의 가치가 적게는 약 5배에서 30배까지 불어날 수 있습니다.
                <br>
                <br>
                <strong>아프리카 어느 지역에 염소가 전달되나요?</strong>
                <br>
                <br> 우선적으로 서아프리카 니제르, 마라디 지방의 테사와지역에 염소 배분, 백신접종, 식량공급 등의 프로그램으로 쓰입니다. 그 외에도 아프리카 및 아시아 지역에 식량 접근성이 미비해 굶주림과 영양실조를 겪는 아동에게 시급한 지원이 필요한 경우, 여러분의 후원금은 긴급구호 및 보건영양 프로그램에 사용됩니다.
                <br>
                <br>사진 ⓒhangeumsun/Save the Children
            </p>
            <img src="assets/images/img_savethechildren_campaign_2.jpg" class="img_campaign">
            <div class="footer">
                <button type="button"  class="btn btn-lg btn-block btn-accent-bordered donate-btn-group" data-toggle="modal" data-target="#modal-payment" data-id="3">Toss로 후원하기</button>
            </div>
        </div>
        <div class="content">
            <div class="content-header">
                <img src="assets/images/logo_savethechildren.png" alt="세이브더칠드런" class="pull-left">
                <div class="partner">
                    <h3 class="partner-name elephant700-text">세이브더칠드런</h3>
                    <span class="donation-status elephant600-text">후원 모집 중</span>
                </div>
            </div>
            <p class="description">
                "아기들이 5세까지 생존할 수 있도록 도와주세요."
                <br>
                <br> 매년 전세계 690만 명의 5세 미만 영유아가 사망하고, 이 중 약 5백만 명은 너무나 쉽게 예방 및 치료가 가능한 질병으로 사망합니다.
                <br>
                <br>
                <br> 또, 매년 거의 100만 명의 신생아가 태어난 당일에 사망합니다.
                <br>
                <br> 저개발국에서는 기본적인 의료시설이 거의 없기 때문에 산모가 대개 집에서 아기를 낳게 되고, 따라서 환경이 비위생적이거나 의료기자재와 의약품이 부족해서 아기가 쉽게 사망에 이르게 됩니다.
                <br>
                <br> 생존율을 높이기 위해서는 멀리 있는 산모에게 적시에 도움을 줄 수 있도록 지역보건요원이 쉽게 갈 수 있는 여건을 마련해야 하며, 신생아에게 필요한 물품, 기구 등을 갖추고 있어야 합니다.
                <br>
                <br> 신생아 패키지에는 5세 미만 영유아 살리기 필수약품 5종, 말라리아방지모기장, 신생아보온담요, 산모와 태아를 살리는 보건요원 양성 비용 일체가 포함돼 있습니다.
                <br>
                <br>
                <strong>도움이 절실한 전 세계 산모와 아기들에게 꼭 필요한 물품과 프로그램을 전달할 수 있도록 도와주세요.</strong>
                <br>
                <br>사진 ⓒColin Crowley/Save the Children
            </p>
            <img src="assets/images/img_savethechildren_campaign_5.jpg" class="img_campaign">
            <div class="footer">
                <button type="button"  class="btn btn-lg btn-block btn-accent-bordered donate-btn-group" data-toggle="modal" data-target="#modal-payment" data-id="4">Toss로 후원하기</button>
            </div>
        </div>
        <div class="content">
            <div class="content-header">
                <img src="assets/images/logo_savethechildren.png" alt="세이브더칠드런" class="pull-left">
                <div class="partner">
                    <h3 class="partner-name elephant700-text">세이브더칠드런</h3>
                    <span class="donation-status elephant600-text">후원 모집 중</span>
                </div>
            </div>
            <p class="description">
                “나는 왜 학교에 갈 수 없죠?”
                <br>
                <br> 글을 읽고 쓸 줄 모르는 전 세계 성인 중 약 67%가 여성. 조혼에 내몰리는 18세 이하 여아는 하루 41000명. 가사노동 아동의 75%는 여자아이.
                <br>
                <br>
                <br> 빈곤과 사회적 악습으로 교육의 기회를 빼앗긴 여아들이 차별없이 학교에 가고, 나아가 모든 아이들이 질적인 기초 교육을 받을 수 있도록 따뜻한 손길을 내밀어주세요.
                <br>
                <br><strong>후원자님의 기부금은 아이들을 위한 교육 시설과 수준 높은 교사 양성, 학습 프로그램을 제공하기 위해 사용됩니다.</strong>
                <br>
                <br> <q>모든 아이들은 교육을 받을 권리가 있다. 초등 교육은 무료로 제공되어야 한다.</q>
                <br>- 유엔아동권리협약 제 28조
                <br>
                <br> 교육 환경이 열악해 학업을 중도에 포기하는 여자 아이들이 많은 아프리카 4개국. 코트디부아르, 라이베리아, 시에라리온, 우간다 등을 중심으로 아동과 학부모, 교사, 지역 사회와 정부의 변화를 이끌어냅니다. 아이들이 학교에서 꿈을 꿀 수 있도록 도움을 전해주세요.
                <br>
                <br>사진 ⓒT.Trenchard/Save the Children
            </p>
            <img src="assets/images/img_savethechildren_campaign_3.jpg" class="img_campaign">
            <div class="footer">
                <button type="button"  class="btn btn-lg btn-block btn-accent-bordered donate-btn-group" data-toggle="modal" data-target="#modal-payment" data-id="5">Toss로 후원하기</button>
            </div>
        </div>
    </section>
    <footer class="elephant800-text">
        <ul>
            <li>기부자 여러분의 사랑이 담긴 소중한 기부금은 "세이브더칠드런코리아"를 통해 국내 및 전 세계 아동을 돕는 구호 활동에 사용됩니다.</li>
            <li>본 기부 서비스는 Toss 이용자가 뜻 깊은 기부 활동에 참여하실 수 있도록 "비바리퍼블리카"(Toss 운영사)와 "세이브더칠드런코리아"가 함께 제공합니다.</li>
            <li>기부금 환불 안내: 기부 완료 후에는 환불이 불가하니 신중한 후원 부탁드립니다.</li>
            <li>기부 결제 과정과 관련된 문의, Toss 앱과 관련된 문의는 토스 고객센터(1599-4905, 카카오톡 ID @Toss, support@toss.im)로 문의주시기 바랍니다.</li>
            <li>기부금 사용과 관련된 문의는 "세이브더칠드런코리아"의 홈페이지(https://www.sc.or.kr) 혹은 이메일(webmaster@sc.or.kr)로 문의주시기 바랍니다.
            </li>
        </ul>
    </footer>

    <!-- 결제 Modal-->
    <div id="modal-payment" class="modal fade" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-body">
                    <div class="form-group btn-group btn-amount" role="group" aria-label="">
                        <button type="button" class="btn btn-accent-bordered btn-amount-group btn-amount-fixed" data-value=3000>3,000원</button>
                        <button type="button" class="btn btn-accent-bordered btn-amount-group btn-amount-fixed" data-value=10000>10,000원</button>
                        <button type="button" class="btn btn-accent-bordered btn-amount-group btn-amount-free" data-value=0>직접 입력</button>
                    </div>
                    <div class="form-group amount-input-div" hidden>
                        <input type="tel" class="form-control" id="input-amount" placeholder="최소 3,000원 / 최대 2,000,000원" min="3000" max="2000000" value="0">
                    </div>
                    <div class="form-group">
                        <label class="checkbox">
                            <input id="donation-receipt" type="checkbox" name="name" value=""> 기부금 영수증을 발행합니다. (주민등록번호 입력 필요)
                        </label>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-accent btn-block btn-lg" id="btn-submit">기부하기</button>
                </div>
            </div>
            <form id="form-donate">
                <input name="productId" value="" type="hidden">
                <input name="amount" value="0" type="hidden">
                <input name="registrationNumber" value="" type="hidden">
                <input type="hidden" name="userToken" value="${userToken!''}">
                <!--<input name="" value="" type="hidden">-->
                <!--<input name="" value="" type="hidden">-->
                <!--<input name="" value="" type="hidden">-->
            </form>
        </div>
    </div>

    <!-- 주민번호입력 Modal-->
    <div id="modal-resident-number" class="modal fade modal-bottom" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-body">
                    <div class="form-group">
                        <label for="resident-number">주민등록번호</label>
                        <div class="form-resident-number">
                            <input type="tel" maxlength="6" class="form-control" id="input-resident-number-first" placeholder="앞 6자리" autocomplete="off">
                            <div id="input-dash">-</div>
                            <input type="tel" maxlength="7" class="form-control" id="input-resident-number-last" placeholder="뒤 7자리" autocomplete="off">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="checkbox">
                            <input type="checkbox" name="agree-issue-donation-receipt" value=""> 성명 및 주민등록번호 수집ㆍ이용ㆍ제공에 대한 동의 [필수]
                            <button type="button" id="btn-privacy-policy" class="btn btn-default btn-sm" data-toggle="modal" data-target="#modal-privacy-policy">자세히 보기</button>
                        </label>
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="btn-resident-number-complete" type="button" class="btn btn-accent-bordered btn-block btn-lg">확인</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 개인정보 제공동의 자세히보기 Modal-->
    <div id="modal-privacy-policy" class="modal fade" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-body">
                    <table class="table table-bordered">
                        <tr>
                            <td class="active">제공목적</td>
                            <td>국세청 연말정산간소화 서비스의 기부금 영수증 발행</td>
                        </tr>
                        <tr>
                            <td class="active">제공항목</td>
                            <td>성명 및 주민등록번호(고유식별정보)</td>
                        </tr>
                        <tr>
                            <td class="active">제공받는곳</td>
                            <td>세이브더칠드런
                                <br> KCB (성명 및 주민등록번호 일치 여부 확인 목적)</td>
                        </tr>
                        <tr>
                            <td class="active">보유기간</td>
                            <td>5년</td>
                        </tr>
                    </table>
                    <button type="button" id="btn-privacy-policy-done" class="btn btn-lg btn-block btn-accent-bordered" data-dismiss="modal">확인</button>
                </div>
            </div>
        </div>
    </div>


    <!-- Toss JS Framework CDN -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <script src="https://toss.im/tossframe/assets/javascripts/tossframe.js"></script>
    <script>
        $(function () {
            var queryParameter = getUrlVars();
            var modal_payment = $('#modal-payment');
            var form_donate = $(modal_payment).find('#form-donate');
            $(form_donate)
                    .find('input[name=userToken]')
                    .val(queryParameter["userToken"]);

            $(modal_payment).on('shown', function() {
                $("#txtname").focus();
            });

            $('.donate-btn-group').click(clickDonateBtn);
            $('#donation-receipt').click(changeAgreeDonateReceiptCheckbox);
            $('#btn-resident-number-complete').click(residentNumberCompleteClick);
            $('.btn-amount-fixed').click(amountFixedBtnClick);
            $('.btn-amount-free').click(amountFreeBtnClick);
            $('#modal-resident-number').on('hidden.bs.modal', residentNumberInputModalCloseEvent);
            $('#btn-submit').click(submit);
            $('#input-resident-number-first').keyup(registrationFirstKeyUp);
            $('#input-resident-number-last').keyup(registrationLastKeyUp);
            // 주민등록 번호 앞자리 입력 시
            function registrationFirstKeyUp(){
                if($(this).val().length == 6){
                    $('#input-resident-number-last').select();
                }
            }
            // 주민등록 번호 뒷자리 입력 시
            function registrationLastKeyUp(){
                if($(this).val().length == 7){
                    $('input[name=agree-issue-donation-receipt]').select();
                }
            }
            // 기부 버튼 클릭
            function clickDonateBtn(e){
                var id = $(this).data('id');
                $(form_donate)
                        .find('input[name=productId]')
                        .val(id);
                console.log('donate btn clicked! ' + id);
            }

            // 주민등록 번호와 체크박스에 정상적인 값이 들어갔는지 확인
            function checkRegistrationNumberEndAgreementCheckBoxIsCorrect(){
                if ($('#input-resident-number-first').val().length != 6) {
                    return false;
                }
                if ($('#input-resident-number-last').val().length != 7) {
                    return false;
                }
                return $('input[name=agree-issue-donation-receipt]').is(':checked');
            }

            // 주민등록번호 입력 modal close event
            function residentNumberInputModalCloseEvent(){
                var checkCorrectInput = checkRegistrationNumberEndAgreementCheckBoxIsCorrect();
                $("#modal-resident-number").modal('hide');
                $("#modal-payment").modal('show');
                $('input[id=donation-receipt]').attr('checked', checkCorrectInput);
                if (checkCorrectInput) {
                    var registrationNumber = $('#input-resident-number-first').val() + $('#input-resident-number-last').val();
                    $(form_donate)
                            .find('input[name=registrationNumber]')
                            .val(registrationNumber);
                } else {
                    $(form_donate)
                            .find('input[name=registrationNumber]')
                            .val('');
                }
            }

            // 기부금 영수증 체크박스
            function changeAgreeDonateReceiptCheckbox() {
                console.log('donate-receipt-checkbox:' + $('input[id=donation-receipt]').is(':checked'));
                if ($('input[id=donation-receipt]').is(':checked') === true) {
                    $("#modal-payment").modal('hide');
                    $("#modal-resident-number").modal('show');
                }
            }
            
            $('#modal-resident-number').on('shown.bs.modal', function (e) {
                $('#input-resident-number-first').focus();
            });

            // 기부금 영수증 발행 팝업 확인 버튼
            function residentNumberCompleteClick(){
              $('#modal-resident-number').modal('hide');
            }

            // fixed amount btn is clicked
            function amountFixedBtnClick(){
                $('.amount-input-div').hide();
                resetActiveClass(this);
                $('#input-amount').val($(this).data('value'));
                $('input[id=donation-receipt]').select();
            }
            // free amount btn is clicked
            function amountFreeBtnClick(){
                $('.amount-input-div').show();
                resetActiveClass(this);
                $('#input-amount').val('');
                $('#input-amount').select();
            }
            // chage pop-up btn's active class
            function resetActiveClass(obj){
                $('.btn-amount-group').removeClass('active');
                $(obj).addClass('active');
            }

            function submit(){
                var amount = $('#input-amount').val();
                if (amount.length <= 0) {
                    return alert('금액을 선택 해주세요.');
                }
                if (Number(amount) < 3000) {
                    return alert('설정 가능한 최소 금액은 3,000원 입니다.');
                }

                if (Number(amount) > 2000000) {
                    return alert('설정 가능한 최대 금액은 2,000,000원 입니다.');
                }

                var issueDonationReceipt = $('input[id=donation-receipt]').val();
                if (issueDonationReceipt) {
                    if(!checkRegistrationNumberEndAgreementCheckBoxIsCorrect()){
                        return alert('기부금 영수증 발행을 위해 필요한 정보를 모두 다 입력해주세요.');
                    }
                }
                $(form_donate)
                        .find('input[name=amount]')
                        .val(amount);

                var apiUri = window.location.origin+"/donation/pay";
                var parameter = $(form_donate).serialize();
                console.log(parameter);

                $.post(apiUri, parameter).done(function (data, status) {
                    console.log('data: ' + data + ', status: ' + status);
                    if (data.status === 200 && data.code === 0) {
                        window.location = "supertoss://pay?payToken=" + data.payToken;
                    }
                }).fail(function(xhr, status, error) {
                    alert(xhr.responseJSON.errorMessage);
                });


            }

            // 본문 접기/펴기
            var minimized_elements = $('p.description');
            var maxLines = 3;

            minimized_elements.each(function () {
                // var textArr = $(this).text().split(/\n/); // Not  supported in IE < 9
                var textArr = $(this).html().replace(/\n?<br>/gi, "<br>").split(/<br>/);
                var countLines = textArr.length;

                if (countLines > maxLines) {
                    text_less = textArr.slice(0, maxLines).join("<br>");
                    text_more = textArr.slice(maxLines, countLines).join("<br>");
                } else return;

                $(this).html(
                    text_less + '<span>... </span><a href="#" class="more elephant600-text">계속 읽기</a>' +
                    '<span style="display:none;">' + text_more + ' <a href="#" class="less elephant600-text">접기</a></span>'
                );
            });

            $('a.more', minimized_elements).click(function (event) {
                event.preventDefault();
                $(this).hide().prev().hide();
                $(this).next().show();
            });

            $('a.less', minimized_elements).click(function (event) {
                event.preventDefault();
                $(this).parent().hide().prev().show().prev().show();
            });

            function getUrlVars()
            {
                var vars = [], hash;
                var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
                for(var i = 0; i < hashes.length; i++)
                {
                    hash = hashes[i].split('=');
                    vars.push(hash[0]);
                    vars[hash[0]] = hash[1];
                }
                return vars;
            }

        });
    </script>
</body>

</html>
